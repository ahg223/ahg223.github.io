<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>가상머신부터 오케스트레이션 툴 까지 - 선생보단 학생</title>
<meta name="description" content="OS, VM, cgroup, container, orchastration">


  <meta name="author" content="ahg223">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="선생보단 학생">
<meta property="og:title" content="가상머신부터 오케스트레이션 툴 까지">
<meta property="og:url" content="http://localhost:4000/moderncs/os-k8s/">


  <meta property="og:description" content="OS, VM, cgroup, container, orchastration">



  <meta property="og:image" content="http://localhost:4000/assets/images/88x88.jpg">





  <meta property="article:published_time" content="2019-11-08T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/moderncs/os-k8s/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "ahg223",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="선생보단 학생 Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          선생보단 학생
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/ModernCS/" >ModernCS</a>
            </li><li class="masthead__menu-item">
              <a href="/ClassicCS/" >ClassicCS</a>
            </li><li class="masthead__menu-item">
              <a href="/ProblemSolve/" >PS</a>
            </li><li class="masthead__menu-item">
              <a href="/ProjectDesign/" >Project</a>
            </li><li class="masthead__menu-item">
              <a href="/Private/" >Private</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/88x88.jpg" alt="ahg223" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">ahg223</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>배우는 게 재미있어 선생님을 포기한 교육학도</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">South Korea</span>
        </li>
      

      
        
          
            <li><a href="mailto:ahg2230@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
        
          
        
          
            <li><a href="https://facebook.com/ahg223" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
          
        
          
            <li><a href="https://github.com/ahg223" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="가상머신부터 오케스트레이션 툴 까지">
    <meta itemprop="description" content="OS, VM, cgroup, container, orchastration">
    <meta itemprop="datePublished" content="November 08, 2019">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">가상머신부터 오케스트레이션 툴 까지
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="커널과-os">커널과 OS</h2>
<p><img src="https://user-images.githubusercontent.com/34998051/68454527-4230a900-023c-11ea-9149-0d8c100eee65.png" alt="image" /></p>

<p>대부분의 컴퓨터는 CPU, 보조기억장치(HDD, SSD), 무선 랜 카드 등의 하드웨어로 이루어져 있고, 하드웨어와 상호작용하는 소프트웨어가 내장된다. 그러한 소프트웨어 중 운영체제는 이러한 하드웨어와 소프트웨어를 운영하는 역할을 수행한다.</p>

<p>그러한 운영체제 안에는 커널이 있는데, 이것은 소프트웨어와 하드웨어 간의 다리 역할을 수행한다. 어렵게 얘기하면 프로세스(소프트웨어의 최소 단위)의 스케쥴링, 디스크 혹은 메모리 읽고 쓰기 등을 해낸다. 위의 이미지와 같이 OS는 사용자가 사용자 공간을 사용함에 있어서 문제가 없도록 관리하고 운영해주는 역할을 수행한다.</p>

<h2 id="virtual-machine">Virtual Machine</h2>
<p><img src="https://user-images.githubusercontent.com/34998051/68454799-182bb680-023d-11ea-94b3-07ca683e8869.png" alt="image" /></p>

<p>이러한 운영체제는 당연히 많은 종류가 있고, 호환이 안되는 경우가 많다. 예를 들면 맥 OS와 윈도우가 그렇다.
이러한 경우들 때문에 하나의 컴퓨터에 여러 운영체제를 띄우려는 시도가 나오고, 그 중 하나가 바로 가상 머신이다.</p>

<p><img src="https://user-images.githubusercontent.com/34998051/68455160-f979ef80-023d-11ea-9f65-f4bb759b0d74.png" alt="image" /></p>

<p>이미 운영체제(Host OS)가 존재하는 컴퓨터 위에 필요한 운영체제(Guest OS)를 올리고, 이 운영체제(Guest OS)에게 마치 하드웨어가 연결된 듯 속이는 소프트웨어(하이퍼바이저) 위에서 동작하게 만들어 속이는 것이다. 마치 위 그림과 같아지는데, 이때 host OS도 없이 하이퍼 바이저가 전부 관리하는 베어메탈 방식 등 여러 방식으로 가상 머신은 구성되고 운영된다.</p>

<h2 id="cgroups">cgroups</h2>
<p>control groups의 줄임말인 cgroups는 리눅스 OS의 커널 기능 중 유저 프로세스의 리소스를 관리하는 커널 기능이다. 이것은 여러 프로세스와 스레드(프로세스 내부의 작업 단위)를 그룹화(네임스페이스)하여 관리하는데, 그 수준이 매우 높았다. 간단히 말하자면, 네임스페이스 내부의 프로세스 들에게 해당 네임스페이스는 고유한 하나의 가상머신으로 보일 정도이다. 자세히 말하자면, 각각의 네임스페이스는 CPU 사용량 제한 및 메모리 배치 및 사용량 제어, 디바이스 입출력 량 제어, 네트워크 인터페이스 제어, 서로 다른 네임스페이스 간 PID 조회 불가능 등이 있다.</p>

<h2 id="containers">Containers</h2>
<p><img src="https://user-images.githubusercontent.com/34998051/68455727-6641b980-023f-11ea-9852-69ca00deea4d.png" alt="image" /></p>

<p>cgroups는 LXC(linux container) 기술의 기반이 되었다. 다른 OS 구동을 위한 가상 머신에는 하이퍼바이저와 관련 host os와의 동기화 등 많은 작업이 필요했고, 꽤 부담이 되었다. 하지만 cgroups는 네임스페이스 분리를 통해 각각의 프로세스에게 네트워크 스페이스까지 격리된 가상 환경을 제공할 수 있게 해주었다. 이러한 리눅스 컨테이너 기술을 기반으로 많은 컨테이너 기술이 생겨났고, 그 중 산업 표준이 된 기술이 바로 Docker이다.</p>

<h2 id="docker">Docker</h2>
<p><img src="https://user-images.githubusercontent.com/34998051/68456124-54144b00-0240-11ea-800d-e9064bd186a2.png" alt="image" /></p>

<p>오늘날 컨테이너라 하면 대부분 Docker를 가르킬 정도로 유명한 오픈소스이다. cgroups, linux 커널과 윈도우 환경에서는 윈도우가 제공하는 네임 스페이스 기술을 기반으로 발전하였다. 다른 컨테이너와 공통점은, 하나의 OS가 이미지로 저장된 뒤 추후에 가상 환경을 구축하기 위하여 구동되는데, 이 OS 안에는 파일 시스템, 바이너리, 커널 등을 전부 포함해야 하지만 이 이미지는 오직 파일 시스템과 바이너리만 포함하여 가볍다는 점이다.</p>

<p><img src="https://user-images.githubusercontent.com/34998051/68456475-30053980-0241-11ea-90f2-2b9a8c0c4355.png" alt="image" /></p>

<p>기존 컨테이너와 차이점을 짚어보자면, 도커의 유니온 파일 시스템이 있다. 도커의 이미지는 여러 이미지의 레이어로 구성되어 수정이 되는 만큼만 업데이트하면 된다. 예를 들어, 4gb 크기의 이미지 중 3mb만큼 수정이 더해졌다면 이를 다시 이미지로 만들 때 4.003gb를 다시 이미지로 만드는 것이 아니라 3mb만큼 만 업데이트가 되어 속도가 빠르다. 또 다른 예시를 들어보자면, 하나의 컴퓨터 위에 a b d로 구성된 이미지와 a b c로 구성된 이미지를 돌려야한다고 가정하자. 이때, 해당 컴퓨터에는 a b c d가 한개씩 저장된 뒤 위 사진처럼 a b를 공유한다. 그 후 각 이미지를 구동시키고 cgroup과 네임스페이스를 생성해 각각의 가상 환경은 완전히 독립된 머신과 같이 운영된다.</p>

<p>이러한 컨테이너는 경량성 그 이상의 장점이 있다. docker만 설치되어 있다면, OS가 ubuntu, MacOS, Windows, CentOS 등 상관없이 컨테이너 내부는 설정한 OS가 되어 동작한다는 점이다. 또한 표준화된 작업 또는 연산의 단위가 되었다. 예를 들어, DB를 sharding하려 한다면 DB 하나를 이미지로 만들어 여러 개의 컨테이너로 작동시키면 된다. 각각의 DB에게 cpu, ram, 스레드 수 등 여러 세세한 리소스를 할당하고 조정하던 전과는 다르게 “컨테이너 몇개를 띄우냐”는 훨씬 쉬운 추상화를 제공한다.</p>

<h2 id="orchestarion">Orchestarion</h2>
<p>그렇다면 몇 백개의 가상 머신에 몇 만개의 컨테이너를 배포하고 싶다면 도커로 충분할까? 컨테이너 간 네트워킹과 volume 개념 등 docker는 이러한 것들을 훨씬 쉽게 만들어 주었지만 부족한 부분이 많다. 가상 머신 간의 네트워킹, 갑작스런 컨테이너 크러쉬 혹은 다운에 대한 대응, 업그레이드나 롤백 같은 시시각각 변하는 시스템 성질 처리 자동화에 있어 docker 하나만으로는 아직 역부족이다.</p>

<p>이러한 것을 돕기 위하여 새로 생겨난 툴이 바로 orchestration이다. 컨테이너에 대한 로드 밸런싱 부터 새로운 컨테이너로 모든 리소스를 적용, 클라이언트가 모르게 자동화 된 복구를 실행하며 특별한 이미지 구성 없이 암호와 같이 중요한 정보를 따로 저장하고 관리할 수 있다.</p>

<p><a href="https://goofcode.github.io/container-101">참고 자료</a></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#docker" class="page__taxonomy-item" rel="tag">Docker</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#kubernetes" class="page__taxonomy-item" rel="tag">Kubernetes</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#os" class="page__taxonomy-item" rel="tag">OS</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#moderncs" class="page__taxonomy-item" rel="tag">ModernCS</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-11-08T00:00:00+09:00">November 08, 2019</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%EA%B0%80%EC%83%81%EB%A8%B8%EC%8B%A0%EB%B6%80%ED%84%B0+%EC%98%A4%EC%BC%80%EC%8A%A4%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%85%98+%ED%88%B4+%EA%B9%8C%EC%A7%80%20http%3A%2F%2Flocalhost%3A4000%2Fmoderncs%2Fos-k8s%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fmoderncs%2Fos-k8s%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fmoderncs%2Fos-k8s%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/protocol-stack/" class="pagination--pager" title="Protocol Stack
">Previous</a>
    
    
      <a href="/moderncs/HTTP/" class="pagination--pager" title="History of HTTP
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/500x300.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/moderncs/HTTP/" rel="permalink">History of HTTP
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">HTTP 0.9, 1.0, 1.1, 2.0, 3.0
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/500x300.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/protocol-stack/" rel="permalink">Protocol Stack
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Protocol Stack 이란

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/500x300.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/network-gateway/" rel="permalink">Network Gateway
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Gateway

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/500x300.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/dining-philosopher/" rel="permalink">Dining Philosophers Problem
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">세마포어와 뮤텍스, DeadLock과 같은 개념을 모르신다면 프로세스와 스레드와 임계영역포스트를 보고오시면 됩니다.

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
          <li><a href="https://facebook.com/ahg223" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/ahg223" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 ahg223. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/moderncs/os-k8s/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/moderncs/os-k8s"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://ahg223-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
